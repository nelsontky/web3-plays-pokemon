import { CSSProperties, useState } from "react";
import tw from "twin.macro";

const styles = {
  container: tw`
    relative
    inline-block
  `,
  button: tw`
    relative
    bg-white
    border-2
    border-black
    py-1
    px-6
    whitespace-nowrap
    select-none
    uppercase
  `,
  background: tw`
    bg-black
    absolute
    inset-2
    w-full
    h-full
  `,
};

export interface AppButtonProps {
  children: React.ReactNode;
  onClick?: () => void;
  disabled?: boolean;
  css?: any;
  containerStyles?: CSSProperties;
}

export default function AppButton({
  children,
  onClick,
  disabled,
  css,
  containerStyles,
  ...rest
}: AppButtonProps) {
  const [isMouseDown, setIsMouseDown] = useState(false);

  return (
    <div css={styles.container} style={containerStyles}>
      <div css={styles.background} />
      <button
        css={[styles.button, css, disabled && tw`cursor-default`]}
        style={{
          ...(isMouseDown && !disabled
            ? { transform: "translate(4px, 4px)" }
            : {}),
        }}
        onClick={disabled ? undefined : onClick}
        onMouseDown={() => {
          setIsMouseDown(true);
        }}
        onMouseUp={() => {
          setTimeout(() => {
            setIsMouseDown(false);
          }, 100);
        }}
        onMouseLeave={() => {
          setIsMouseDown(false);
        }}
        {...rest}
      >
        {children}
      </button>
    </div>
  );
}
